<!-- implementation notes :: this is fixed position with a fixed size.
modify or move this wrapper tag to correct position according to layout requirements  -->

<!-- for header icon notification menu  -->
<div *ngIf="notifications" [ngClass]="notifications ? 'icon-menu icon-animate' : 'icon-menu'">
  <div class="flex items-baseline">
    <mat-icon (click)="toggleNotificationMenu()" class="scale-[1.65]">
      notifications_active
    </mat-icon>  
    <div  
      [matBadge]="getTotalUnreadCount(notifications)"
      [matBadgeColor]="badgeColor"
      [matBadgeSize]="badgeSize"
      [matBadgeHidden]="totalUnread == 0"
      [matBadgePosition]="'below after'"
      class=" z-50 shadow-md">
    </div>
  </div>
</div>

<!-- menu can open only when there are notifications -->
<div *ngIf="menuIsOpen && totalUnread > 0" class="wrapper">

  <div class="notification-container icon-container-animate">
    <!-- vertical mat icon container -->
    <div class="icon-container">

      <app-notification-type *ngFor="let notificationType of notificationTypes; index as iconIdx"
        [matIcon]="notificationType.matIconName"
        [badgeContent]="getUnreadCount(notificationType.originName, notifications)"
        [badgeColor]="badgeColor" 
        [badgeSize]="badgeSize"
        [activeMatIcon]="activeMatIcon"
        (click)="toggleNotification(iconIdx, notificationType)" >
      </app-notification-type>
      <!-- add a close option -->
      <app-notification-type
        [matIcon]="'cancel_presentation'"
        [badgeColor]="badgeColor" 
        [badgeSize]="badgeSize"
        (click)="toggleNotificationMenu()"
      ></app-notification-type>

    </div>

    <!-- notification should be greater then zero -->
    <app-notification-message 
      *ngIf="panelIsOpen && totalUnread > 0"
      (totalUnreadChange)="decrementTotalUnread(totalUnread)"
      [notifications]="notifications"
      [activeNotificationType]="activeNotificationType">
    </app-notification-message>

  </div>

</div>
